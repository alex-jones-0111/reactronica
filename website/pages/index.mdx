import Highlight, { defaultProps } from 'prism-react-renderer';

import DrumPads from '../components/DrumPads';
import CodeBlock from '../components/CodeBlock';
import StepsEditorExample from '../components/StepsEditorExample';

<!-- > Warning: Highly experimental. APIs will change. -->

React audio components for making music in the browser. Uses [ToneJS](https://tonejs.github.io/) under the hood.

## Install

```bash
$ npm install --save reactronica tone
```

Note: Use React version >= 16.8 as [Hooks](https://reactjs.org/docs/hooks-intro.html) are used internally.

## Examples

### Drum Pads

<DrumPads />

```jsx
// Simplified Drum Pads

const DrumPads = () => {
  const [notes, setNotes] = React.useState(null);

  return (
    <>
      <button
        onMouseDown={() => setNotes([{ name: 'C3' }])}
        onMouseUp={() => setNotes(null)}
      >
        Kick
      </button>
      {/* ...other pads */}

      {/* Reactronica Components */}
      <Song>
        <Track>
          <Instrument
            type="sampler"
            notes={notes}
            samples={{
              C3: '/drums/kick.wav',
              D3: '/drums/snare.wav',
              E3: '/drums/hat.wav',
            }}
          />
        </Track>
      </Song>
    </>
  );
};
```

### Piano Roll

<StepsEditorExample />

```jsx
// Simplified Piano Roll

const PianoRollExample = () => {
  const [isPlaying, setIsPlaying] = useState(false);
  const [currentStepIndex, setCurrentStepIndex] = useState(0);
  const [steps, setSteps] = useState([
    ['C3', 'E3', 'A3'],
    null,
    ['C3', 'E3', 'G3', 'B3'],
    null,
    ['C3', 'F3', 'A3'],
    null,
    ['D3', 'G3', 'B3'],
    null,
  ]);

  return (
    <>
      <button onClick={() => setIsPlaying(!isPlaying)}>
        {isPlaying ? 'Play' : 'Stop'}
      </button>

      <PianoRoll
        currentStepIndex={currentStepIndex}
        onClick={(steps) => setSteps(steps)}
      />

      {/* Reactronica Components */}
      <Song isPlaying={isPlaying}>
        <Track
          steps={steps}
          // Callback triggers on every step
          onStepPlay={(_, index) => {
            setCurrentStepIndex(index);
          }}
        >
          <Instrument type="polySynth" />
        </Track>
      </Song>
    </>
  );
};
```
